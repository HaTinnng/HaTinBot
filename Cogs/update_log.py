import discord
from discord.ext import commands

# 업데이트 내역 저장 (개발자가 직접 수정)
UPDATE_LOGS = [
    {
        "date": "2025-02-04",
        "details": [
            "**명령어 변동사항**",
            "**추가사항**",
            "✅ `#종목소개` 추가: (주식의 시작가격범위, 주식주에 대한 설명 추가)",
            "✅ `#주식도움말` 추가: (주식에 피리요한 설명과 명령어를 정리한 문서 제공)",
            "✅ `#업데이트` 명령어 추가: (업데이트 날짜와 내역 확인 가능)",

            "**수정사항**",
            "✅ `#도움말` 업데이트: (봇이 발달하면서 도움말이 미흡했던 부분을 수정)",

            "**주식 변동사항**",

            "**주식종목**",
            "`섹보경컬쳐` --> `섹보경아트`로 이름 변경",
            "`전차수리점` --> `전차자동차`로 이름 변경",
            "`오십만전자` 추가",
            "`창훈버거` 추가",
            "`끼룩제약` 추가",
            "`날틀식품` 추가",
            "`파피게임사` 추가",

            "`311유통`을 제외한 나머지 시작가격 조정(더 세분화하여 시작시 주식가격이 비슷한 상황으로 지루한 상황 해결)",

            "**명령어**",
            "`주식구매`,`주식판매` 시 종목명 다음에 all/전부/올인/다/풀매수(구매시)/풀매도(판매시)를 입력시 구매시에는 가지고 있는 돈 내에서 해당 주식 최대로 구매, 판매시에는 입력한 주식을 전부 판매합니다.",
            "`프로필`에 동일한 명령어 `자산`/`자본`추가",
            "`프로필'에 평균구매가를 보이게 설정",
            "`변동내역` 주식명을 입력시 최근 5개까지의 주가변동내역을 보여줍니다.",
            "`주식구매`,`주식판매`에 동일한 명령어 `매수`,`매도` 추가",

            "**주식 로직**",
            "기초자본 증가: 50만 --> 80만 증가",
            "주식 변동 증가감소폭 ±12.3% ~ ±23.78%까지 증가",
            "주식마감/주식시작 시간 변경 --> 다음달 1일 0시 10분에 주식 마감/3일 0시 10분에 주식 시작(0시 0분에도 주식이 변경되는 문제 해결)",
            "주식이 50원 이하로 내려가면 증가감소폭 제한 삭제: ±23.78% --> ±100% (일정이하로 내려가면 마이너스가 안되어 상장폐지가 되지 않는 문제 해결)(다시 50원 초과시 다시 제한)",
            "상장 폐지가 되었는데도 주식이 변동되는 문제 해결",
            "mongoBD를 이용한 데이터 유지(확실하지 않음)",

            "**기타**",
            "각종 버그 수정",

            "**현재 개발 사항(예정)**",
            "블랙잭 멀티 기능 추가",
            "초능력 목록 추가"
            "뽑기 확률 명령어 추가",
            "뽑기 1등, 2등 기록 저장 추가",
            "**과자먹는중**"
            
            
        ]
    },
    
]

class UpdateLog(commands.Cog):
    def __init__(self, bot):
        self.bot = bot

    @commands.command(name="업데이트", aliases=["업데이트내역", "패치노트"])
    async def update_log(self, ctx):
        """
        #업데이트: 최근 업데이트 내역을 확인합니다.
        """
        embed = discord.Embed(
            title="📢 최신 업데이트 내역",
            description="최근 업데이트된 내용을 확인하세요!",
            color=discord.Color.green()
        )

        for log in UPDATE_LOGS[:3]:  # 최근 3개의 업데이트만 표시
            details = "\n".join(log["details"])
            embed.add_field(name=f"📅 {log['date']}", value=details, inline=False)

        embed.set_footer(text="🔄 최신 업데이트 정보를 확인하세요!")

        await ctx.send(embed=embed)

async def setup(bot):
    await bot.add_cog(UpdateLog(bot))
